<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="renderer" content="webkit" />
		<!-- 解决部分兼容性问题，如果安装了GCF，则使用GCF来渲染页面，如果未安装GCF，则使用最高版本的IE内核进行渲染。 -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<!-- 页面按原比例显示 -->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="css/zTreeStyle.css"/>
		<link rel="stylesheet" href="css/base.min.css" />
		<!--[if lt IE 9]>
      <script src="https://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.js"></script>
		<![endif]-->
		<style>
			.input-select-check-content{
				position: static;
				max-height: none;
			}
		</style>
	</head>
	<body>
		<div class="input-select-check-content">
			<ul id="treeId" class="ztree"></ul>
		</div>
		<script type="text/javascript" src="js/jquery.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/base.min.js"></script>
		<script type="text/javascript" src="js/jquery.ztree.all.min.js"></script>
		<script type="text/javascript">
			var setting = {
				check: {
					enable: true,
			//		chkStyle:"checkbox",//复选框
					chkboxType: {
						//"Y": "s",//选择该节点及其以下的所有节点
						//"N": "ps"//取消该节点及其以下所选择的所有节点
						"Y": "",
						"N": ""
					}
				},
				view: {
					dblClickExpand: false,
					showIcon: false,
					//showLine: true,//显示节点之间的连线。
			        selectedMulti: true  //允许同时选中多个节点。
				},
				data: {
					simpleData: {
						enable: true
					}
				},
				callback: {
					beforeClick: beforeClick,
					onCheck: onCheck
				}
			};
			function beforeClick(treeId, treeNode) {
				var zTree = $.fn.zTree.getZTreeObj("treeId");
				zTree.checkNode(treeNode, !treeNode.checked, null, true);
				return false;
			}
			
			function onCheck(e, treeId, treeNode) {
				//treeNode.name 每一个节点的name
				//treeNode.tId  tree id
				var zTree = $.fn.zTree.getZTreeObj("treeId"),
					nodes = zTree.getCheckedNodes(true),
					v = "";//已经选择了的节点name
				for (var i = 0, l = nodes.length; i < l; i++) {
					v += nodes[i].name + ",";
				}
				if (v.length > 0) v = v.substring(0, v.length - 1);
			//	alert(v);
				
			}
			var zNodes = [{
					id: 1,
					pId: 0,
					name: "企业管理",
					open: true
				},
				{
					id:11,
					pId:1,
					name:"企业信息管理",
					open:true
				},
				{
					id:111,
					pId:11,
					name:"企业管理-企业列表"
				},
				{
					id:112,
					pId:11,
					name:"企业管理-获取企业信息"
				},
				{
					id:113,
					pId:11,
					name:"企业管理-添加企业信息"
				},
				{
					id:114,
					pId:11,
					name:"企业管理-获取功能模块数据"
				},
				{
					id:115,
					pId:11,
					name:"企业管理-启用企业"
				},
				{
					id:116,
					pId:11,
					name:"企业管理-审核企业接口"
				},
				{
					id:117,
					pId:11,
					name:"企业管理-编辑企业基本信息"
				},
				{
					id:118,
					pId:11,
					name:"企业管理-查看企业信用卡还款费率"
				},
				{
					id:119,
					pId:11,
					name:"企业管理-查看企业扩展信息(积分,员工人数)"
				},
				{
					id:1110,
					pId:11,
					name:"企业管理-停用企业"
				},
				{
					id:1111,
					pId:11,
					name:"获取企业个性设置接口"
				},
				{
					id:1112,
					pId:11,
					name:"保存企业个性设置接口"
				},
				{
					id:12,
					pId:1,
					name:"企业发票授权管理",
					open: true
				},
				{
					id:121,
					pId:12,
					name:"企业管理-企业发票授信列表"
				},
				{
					id:122,
					pId:12,
					name:"企业管理-获取企业发票授信信息"
				},
				{
					id:123,
					pId:12,
					name:"企业管理-保存企业发票授信信息"
				},
				{
					id:13,
					pId:1,
					name:"企业关系转移",
					open: true
				},
				{
					id:131,
					pId:13,
					name:"企业关系转移-更改企业销售人员"
				},
				{
					id:132,
					pId:13,
					name:"企业关系转移-查看企业转移关系记录"
				},
				{
					id:133,
					pId:13,
					name:"企业关系转移-列表"
				},
				{
					id: 2,
					pId: 0,
					name: "企业管理2",
					open: true
				},{
					id: 21,
					pId: 2,
					name: "企业管理2222",
					open: true
				}
			];
			$.fn.zTree.init($("#treeId"), setting, zNodes);
		</script>
	</body>
</html>
